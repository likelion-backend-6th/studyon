{% extends "base.html" %}
{% load static %}
{% block content %}
    <p>
        username: {{ request.user.username }} <br>
        nickname: {{ nickname }} <br>
        참여 스터디수: {{ my_study.count }} <br>
        평균 리뷰 점수: {% if avg_score %}{{ avg_score|floatformat:2 }}{% else %}0{% endif %}
    </p>
    <h1 class="text-[18px] mt-4">작성한 리뷰 목록</h1>
    <div class="pagination mt-5">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}

        <span class="current-page">Page {{ page_obj.number }} of {{ paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Next</a>
        {% endif %}
    </div>
    <ul>
        {% for study, reviews in grouped_reviews %}
            <li class="mt-3 bg-amber-100">
                <h2>스터디 제목: {{ study.title }}</h2>
                {% for review in reviews %}
                    <div class="mt-2">
                        <p>멤버: {{ review.reviewee.username }}</p>
                        <p>리뷰 점수: {{ review.score }}</p>
                        <p>리뷰 내용: {{ review.review }}</p>
                    </div>
                {% endfor %}
            </li>
        {% endfor %}
    </ul>
{% endblock content %}
